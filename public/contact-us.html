<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./css/contact-us.css">
</head>


<body>
    <img src="images/moon.png" id="icon">
    <div class="maindiv">

        <div class="imgdiv">
            <img src="./images/logo.png" alt="" style="border-radius: 6px;">
        </div>
        <div class="formdiv">

            <form action="" class="form">
                <h2 style="text-align: center;">Contact Us</h2>
                <div>
                    <label for="">Name :</label>
                    <input type="text" required id="name" name="Name" placeholder="Enter Your Name">
                </div>
                <br>

                <div>
                    <label for="">Email :</label>
                    <input type="email" required name="email" id="email" placeholder="Enter Your Email">
                </div>
                <br>

                <div>
                    <label for="">Messsage :</label>
                    <textarea required name="message" id="message" rows="4" cols="57"
                        placeholder="Enter Your Message Given to Organization......"></textarea>
                </div>
                <div style="text-align: center;">
                    <button type="submit" class="button" id="button">Submit</button>
                </div>
            </form>
        </div>

    </div>
    <script src="https://smtpjs.com/v3/smtp.js"></script>
    <script>
        var icon = document.getElementById("icon");
        icon.onclick = function () {
            document.body.classList.toggle("dark-theme");
            if (document.body.classList.contains("dark-theme")) {
                icon.src = "images/sun.png";
            }
            else {
                icon.src = "images/moon.png";
            }
        }
        const submit = document.getElementById('button');
        submit.addEventListener('click', (event) => {
            event.preventDefault(); // Prevent form submission

            // Get form values
            const form_name = document.querySelector('#name').value;
            const form_email = document.querySelector('#email').value;
            const form_message = document.querySelector('#message').value;

            // Check if any of the inputs are empty
            if (!form_name || !form_email || !form_message) {
                alert("Please fill in all fields."); // Alert user to fill in all fields
                return; // Stop execution if any field is empty
            }

            // Validate email format using a regular expression
            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/; // Basic regex for email validation
            if (!emailPattern.test(form_email)) {
                alert("Please enter a valid email address."); // Alert user if email is invalid
                return; // Stop execution if email is invalid
            }

            // Proceed to send the email if all fields are valid
            Email.send({
                Host: "smtp.elasticemail.com",
                Username: "festivesolomon@heywhatsoup.com",
                Password: "A0510339835126B92F05DF7C2EB7E28279F8",
                To: 'harshoxfordgkp@gmail.com',
                From: `${form_email}`,
                Subject: "Contact form submission",
                Body: `Name: ${form_name}\nEmail: ${form_email}\nMessage: ${form_message}`
            }).then(
                message => {
                    console.log('Message sent');
                    alert('Message sent');

                    // Clear input fields after sending
                    document.querySelector('#name').value = '';
                    document.querySelector('#email').value = '';
                    document.querySelector('#message').value = '';
                }
            ).catch(err => {
                console.log("Error occurred:", err);
                alert("Sorry, an error occurred");
            });
        });

    </script>
</body>

</html>